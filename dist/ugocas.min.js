!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("UGOCAS",[],t):"object"==typeof exports?exports.UGOCAS=t():e.UGOCAS=t()}(self,(function(){return e={450:e=>{self,e.exports=(()=>{"use strict";var e={840:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});const r="#version 300 es\r\nprecision highp float;\r\n\r\nin vec2 v_texcoord;\r\n\r\nuniform sampler2D u_texture;\r\n\r\nuniform float u_opacity;\r\n\r\nout vec4 outColor;\r\n\r\nvoid main() {\r\n   outColor = texture(u_texture, v_texcoord) * vec4(1, 1, 1, u_opacity);\r\n}"},289:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});const r="#version 300 es\r\n \r\nin vec2 a_position;\r\nin vec2 a_texcoord;\r\n \r\nuniform mat3 u_transformation;\r\n \r\nout vec2 v_texcoord;\r\n \r\nvoid main() {\r\n   v_texcoord = a_texcoord;\r\n\r\n   gl_Position = vec4((u_transformation * vec3(a_position, 1)).xy, 0, 1);\r\n}"},178:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultResolution=void 0;var i=r(n(947)),o=r(n(108)),a=r(n(627)),u=r(n(991)),s=n(236),c={width:300,height:150,canvas:document.createElement("canvas"),autoStyleCanvas:!1};t.defaultResolution={x:1,y:1};var l=function(){function e(e){this.loader=o.default,e||(e=c);var t=e.width||c.width,n=e.height||c.height,r=e.canvas||c.canvas,l=e.autoStyleCanvas||c.autoStyleCanvas;this.baseStage=new s.BaseStage(t,n),this._canvas=r,l&&(this._canvas.style.width="".concat(t,"px"),this._canvas.style.height="".concat(n,"px")),this._screenSize={width:t,height:n},this.renderer=new i.default({canvas:r,width:this._screenSize.width,height:this._screenSize.height}),a.default.x=this._resolutionX,a.default.y=this._resolutionY,u.default.canvas=r,u.default.on(),u.default.screenSize=this._screenSize}return Object.defineProperty(e.prototype,"width",{set:function(e){this._screenSize.width=e,this.renderer.width=e,a.default.x=this._resolutionX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{set:function(e){this._screenSize.height=e,this.renderer.height=e,a.default.y=this._resolutionY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_resolutionX",{get:function(){return this.renderer.resolution*this._canvas.width/this._screenSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_resolutionY",{get:function(){return this.renderer.resolution*this._canvas.height/this._screenSize.height},enumerable:!1,configurable:!0}),e.prototype.render=function(){this.renderer.render(this.baseStage),this.renderer.flush()},e.prototype.clearScreen=function(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),this.renderer.clear(e,t,n,r)},e.prototype.addResource=function(e,t){this.loader.add(e,t)},e.prototype.loadAll=function(){this.loader.loadAll()},Object.defineProperty(e.prototype,"loaded",{get:function(){return this.loader.loaded},enumerable:!1,configurable:!0}),e}();t.default=l},309:function(e,t){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.TwoDemensionParam=void 0;var i,o=function(){function e(){this._x=1,this._y=1}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e},enumerable:!1,configurable:!0}),e.prototype.set=function(e,t){this._x=e,this._y=t||e},e}();t.TwoDemensionParam=o,r((function(){var e=i.call(this)||this;return e._x=0,e._y=0,e}),i=o);var a=function(){function e(){this._position=new o,this._opacity=1,this._scale=new o,this.rotation=0}return Object.defineProperty(e.prototype,"opacity",{get:function(){return this._opacity},set:function(e){this._opacity=Math.min(Math.max(e,0),1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),e}();t.default=a},479:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n,r){this.x=0,this.y=0,this.w=0,this.h=0,this.x=e,this.y=t,this.w=n,this.h=r}return e.prototype.detectPointHit=function(e,t){return this.x<e&&this.x+this.w>e&&this.y<t&&this.y+this.h>t},e}();t.default=n},339:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){var n=e.call(this)||this;return t&&(n.texture=t),n}return i(t,e),t}(o(n(236)).default);t.default=a},236:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStage=void 0;var c=s(n(309)),l=n(309),f=s(n(991)),d=u(n(179)),h=s(n(479)),p=n(991),_=function(e){function t(){var t=e.call(this)||this;return t._x=0,t._y=0,t}return i(t,e),t}(l.TwoDemensionParam),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.anchor=new _,t.transform=d.identity(),t.parentTransform=d.identity(),t.parentOpacity=1,t.parent=void 0,t.isOnStage=!1,t._size={width:0,height:0},t._eventsArys={pointerdown:[],pointerup:[],pointermove:[]},t.children=[],t}return i(t,e),t.prototype.calcRenderingInfos=function(){this.transform=this._calculateTransform(),this.parentTransform=this._calculateParentTransform(),this.parentOpacity=this._calculateParentOpacity()},t.prototype.addChild=function(e){this.children.push(e),e.parent=this,this.isOnStage&&(e.isOnStage=!0,p.events.forEach((function(t){e._eventsArys[t].forEach((function(e){f.default.add(t,e)}))})))},t.prototype.removeChild=function(e){this.children.splice(this.children.indexOf(e),1),e.parent=void 0,e.isOnStage=!1},t.prototype._calculateTransform=function(){var e=d.translation(this.position.x,this.position.y),t=d.scaling(this.scale.x,this.scale.y),n=d.rotation(this.rotation),r=d.translation(-this.anchor.x,-this.anchor.y);return d.someMultiply(e,n,t,r)},t.prototype._calculateParentTransform=function(){return this.parent?d.multiply(this.parent.parentTransform,this.parent.transform):d.identity()},t.prototype._calculateParentOpacity=function(){return this.parent?this.parent.parentOpacity*this.parent.opacity:1},Object.defineProperty(t.prototype,"worldScale",{get:function(){if(this.parent){var e=this.parent,t=e.worldScale;return{x:t.x*e.scale.x,y:t.y*e.scale.y}}return{x:1,y:1}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldPosition",{get:function(){if(this.parent){var e=this.parent,t=e.worldPosition,n=e.worldScale;return{x:t.x+e.position.x*n.x,y:t.y+e.position.y*n.y}}return{x:0,y:0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._size.width},set:function(e){this._size.width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._size.height},set:function(e){this._size.height=e},enumerable:!1,configurable:!0}),t.prototype.addEventListener=function(e,t){var n={target:this,callback:t};this._eventsArys[e].push(n),this.isOnStage&&f.default.add(e,n)},t.prototype.getBoundingRect=function(){var e=this.worldScale,t=this.worldPosition,n=t.x+(this.position.x-this.anchor.x)*e.x,r=t.y+(this.position.y-this.anchor.y)*e.y,i=(this.texture?this.texture.width*this.texture.scale.x:this._size.width)*this.scale.x*e.x,o=(this.texture?this.texture.height*this.texture.scale.y:this._size.height)*this.scale.y*e.y;return new h.default(n,r,i,o)},t}(c.default);t.default=y;var v=function(e){function t(t,n){var r=e.call(this)||this;return r.isOnStage=!0,r._size={width:t,height:n},r}return i(t,e),t}(y);t.BaseStage=v},736:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(339)),u=o(n(59)),s=o(n(627)),c=n(59),l={font:"sans-serif",fontSize:20,fill:"#f00",strokeWidth:0,stroke:"#000",shadow:"",shadowX:1,shadowY:1,shadowBlur:0},f=function(e){function t(t,n){var r=e.call(this)||this;for(var i in r._text="",r._canvas=document.createElement("canvas"),r._resolution=s.default,r._text=t||"",n=n||l,r._style=n,l)r._style[i]=n[i]||l[i];return r.texture=new u.default(void 0,c.SCALE_MODE.LINEAR),r._updateCanvasTexture(),r}return i(t,e),t.prototype._drawCanvas=function(){var e=this._canvas,t=e.getContext("2d"),n=this._style,r=this._text;e.width=2,e.height=2,t.font="".concat(n.fontSize,"px ").concat(n.font),t.textBaseline="top";var i=t.measureText(r),o=i.width+(n.shadow?n.shadowX:0),a=i.actualBoundingBoxDescent-i.actualBoundingBoxAscent+(n.shadow?n.shadowY:0);e.width=o*this._resolution.x,e.height=a*this._resolution.y,t.scale(this._resolution.x,this._resolution.y),t.clearRect(0,0,e.width,e.height),t.beginPath(),n.shadow&&(t.shadowOffsetX=n.shadowX,t.shadowOffsetY=n.shadowY,t.shadowBlur=n.shadowBlur,t.shadowColor=n.shadow),t.font="".concat(n.fontSize,"px ").concat(n.font),t.textBaseline="top",t.fillStyle=n.fill,t.fillText(r,0,0),t.closePath(),t.beginPath(),n.strokeWidth&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.lineWidth=n.strokeWidth,t.strokeStyle=n.stroke,t.strokeText(r,0,0)),this.texture.scale.x=1/this._resolution.x,this.texture.scale.y=1/this._resolution.y},Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){this._text=e,this._updateCanvasTexture()},enumerable:!1,configurable:!0}),t.prototype._updateCanvasTexture=function(){this._drawCanvas(),this.texture.texture=this._canvas},Object.defineProperty(t.prototype,"style",{get:function(){return this._updateCanvasTexture(),this._style},enumerable:!1,configurable:!0}),t}(a.default);t.default=f},607:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=t.Text=t.Stage=t.Texture=t.Sprite=t.App=void 0;var i=r(n(178));t.App=i.default;var o=r(n(339));t.Sprite=o.default;var a=r(n(59));t.Texture=a.default;var u=r(n(236));t.Stage=u.default;var s=r(n(736));t.Text=s.default;var c=r(n(108));t.Loader=c.default},991:function(e,t){var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.events=void 0;var r=["pointerdown","pointerup","pointermove"];t.events=r;var i=function(){function e(){}var t;return e._getPointerCo=function(e){var t=this._canvasSize;return{x:e.offsetX*this.screenSize.width/t.w,y:e.offsetY*this.screenSize.height/t.h}},e.on=function(){var e,t,i,o=this,a=function(e){null===(i=u._canvas)||void 0===i||i.addEventListener(e,(function(t){var n=o._getPointerCo(t);o._dispatchEvents(e,n)}))},u=this;try{for(var s=n(Object.values(r)),c=s.next();!c.done;c=s.next())a(c.value)}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}},e._dispatchEvents=function(e,t){for(var n=this._eventsArys[e],r=0,i=n.length;r<i;r++){var o=n[r],a=o.target;a.isOnStage&&a.getBoundingRect().detectPointHit(t.x,t.y)&&o.callback()}},Object.defineProperty(e,"canvas",{set:function(e){this._canvas=e,this._canvasSize=this._getCanvasSize(e),this._resizeObserver.observe(document.body)},enumerable:!1,configurable:!0}),e._getCanvasSize=function(e){return{w:e.clientWidth,h:e.clientHeight}},e.add=function(e,t){this._eventsArys[e].push({target:t.target,callback:t.callback})},t=e,e.screenSize={width:0,height:0},e._canvasSize={w:0,h:0},e._eventsArys={pointerup:[],pointerdown:[],pointermove:[]},e._resizeObserver=new ResizeObserver((function(){t._canvasSize=t._getCanvasSize(t._canvas)})),e}();t.default=i},108:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(59)),o=n(59),a=function(){function e(){}return e.add=function(e,t,n){this.loaded=!1;var r=this._promiseLoadingImage(e,t,n);return this._tasks.push(r),this},e.loadAll=function(){var e=this;this._taskNum=this._tasks.length,this._progressManager(this._taskNum,this._taskNum),Promise.all(this._tasks).then((function(){e.loaded=!0,e._loadThen()}))},e._promiseLoadingImage=function(e,t,n){var r=this;return void 0===n&&(n="NEAREST"),new Promise((function(a){fetch(t).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e)})).then((function(t){r._resources.set(e,new i.default(t,o.SCALE_MODE[n])),r._tasks.shift(),r._progressManager(r._taskNum,r._tasks.length),a(t)}))}))},e.loadThen=function(e){this._loadThen=e,0===this._tasks.length&&e()},e.manageProgress=function(e){this._progressManager=e},e.get=function(e){return this._resources.has(e)?this._resources.get(e):void 0},e._resources=new Map,e._tasks=[],e._loadThen=function(){},e._taskNum=0,e._progressManager=function(){},e.loaded=!1,e}();t.default=a},179:(e,t)=>{function n(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],c=e[7],l=e[8],f=t[0],d=t[1],h=t[2],p=t[3],_=t[4],y=t[5],v=t[6],g=t[7],b=t[8];return[f*n+d*o+h*s,f*r+d*a+h*c,f*i+d*u+h*l,p*n+_*o+y*s,p*r+_*a+y*c,p*i+_*u+y*l,v*n+g*o+b*s,v*r+g*a+b*c,v*i+g*u+b*l]}Object.defineProperty(t,"__esModule",{value:!0}),t.identity=t.someMultiply=t.multiply=t.rotation=t.translation=t.scaling=t.projection=void 0,t.projection=function(e,t){return[2/e,0,0,0,-2/t,0,-1,1,1]},t.scaling=function(e,t){return[e,0,0,0,t,0,0,0,1]},t.translation=function(e,t){return[1,0,0,0,1,0,e,t,1]},t.rotation=function(e){var t=Math.sin(e),n=Math.cos(e);return[n,-t,0,t,n,0,0,0,1]},t.multiply=n,t.someMultiply=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e[0],i=0,o=e.length-1;i<o;i++)r=n(r,e[i+1]);return r},t.identity=function(){return[1,0,0,0,1,0,0,0,1]}},478:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enableAlpha=void 0,t.enableAlpha=function(e){e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0)}},144:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createRectangleIndices=t.createLinkedVertexBuffer=void 0,t.createLinkedVertexBuffer=function(e,t,n,r){var i=e.getAttribLocation(t,n),o=e.getAttribLocation(t,r);e.enableVertexAttribArray(i),e.enableVertexAttribArray(o);var a=e.FLOAT,u=4*Float32Array.BYTES_PER_ELEMENT,s=2*Float32Array.BYTES_PER_ELEMENT,c=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,c),e.vertexAttribPointer(i,2,a,!1,u,0),e.vertexAttribPointer(o,2,a,!1,u,s),e.bindBuffer(e.ARRAY_BUFFER,null),c},t.createRectangleIndices=function(e){var t=new Uint16Array([0,1,2,1,3,2]),n=function(e,t,n){var r=e.createBuffer();return e.bindBuffer(t,r),e.bufferData(t,n,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),r}(e,e.ELEMENT_ARRAY_BUFFER,t);return n}},484:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resizeCanvas=t.clearCanvas=void 0,t.clearCanvas=function(e,t){var n=t.r/256,r=t.g/256,i=t.b/256,o=void 0===t.a?1:t.a;e.clearColor(n,r,i,o),e.clear(e.COLOR_BUFFER_BIT)},t.resizeCanvas=function(e,t){var n=e.canvas,r=n.clientWidth,i=n.clientHeight;n.width=r*t,n.height=i*t,e.viewport(0,0,n.width,n.height)}},97:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUniformLocation=t.resizeCanvas=t.clearCanvas=t.enableAlpha=t.uploadTexture=t.createTexture=t.createLinkedVertexBuffer=t.createRectangleIndices=t.createProgram=void 0;var r=n(381);Object.defineProperty(t,"createProgram",{enumerable:!0,get:function(){return r.createProgram}});var i=n(144);Object.defineProperty(t,"createLinkedVertexBuffer",{enumerable:!0,get:function(){return i.createLinkedVertexBuffer}}),Object.defineProperty(t,"createRectangleIndices",{enumerable:!0,get:function(){return i.createRectangleIndices}});var o=n(363);Object.defineProperty(t,"createTexture",{enumerable:!0,get:function(){return o.createTexture}}),Object.defineProperty(t,"uploadTexture",{enumerable:!0,get:function(){return o.uploadTexture}});var a=n(478);Object.defineProperty(t,"enableAlpha",{enumerable:!0,get:function(){return a.enableAlpha}});var u=n(484);Object.defineProperty(t,"clearCanvas",{enumerable:!0,get:function(){return u.clearCanvas}}),Object.defineProperty(t,"resizeCanvas",{enumerable:!0,get:function(){return u.resizeCanvas}});var s=n(383);Object.defineProperty(t,"getUniformLocation",{enumerable:!0,get:function(){return s.getUniformLocation}})},381:(e,t)=>{function n(e,t,n){var r=e.createShader(t);if(!r)throw new Error("failed to create a shader");return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)||(console.log(e.getShaderInfoLog(r)),e.deleteShader(r)),r}Object.defineProperty(t,"__esModule",{value:!0}),t.createProgram=void 0,t.createProgram=function(e,t,r){var i=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e.createProgram();if(!r)throw new Error("failed to create program");for(var i=0,o=t.length;i<o;i++)e.attachShader(r,t[i]);return e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)||(console.log(e.getProgramInfoLog(r)),e.deleteProgram(r)),r}(e,n(e,e.VERTEX_SHADER,t),n(e,e.FRAGMENT_SHADER,r));return i}},363:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.uploadTexture=t.createTexture=void 0,t.createTexture=function(e,t){var n=e.createTexture();return e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e[t]),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e[t]),e.bindTexture(e.TEXTURE_2D,null),n},t.uploadTexture=function(e,t,n){return e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null),t}},383:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUniformLocation=void 0,t.getUniformLocation=function(e,t,n){return e.getUniformLocation(t,n)}},947:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=a(n(483)),s=a(n(289)),c=a(n(840)),l=o(n(97)),f=o(n(179)),d=function(){function e(e){this.resolution=window.devicePixelRatio||1;var t=e.canvas,n=e.width,r=e.height;this.canvas=t,this._screenSize={width:n,height:r},this.gl=this.canvas.getContext("webgl2");var i=this.gl;u.default.gl=i,this.resizeCanvas(),l.enableAlpha(i);var o=l.createProgram(i,s.default,c.default);this._program=o,this._indexBuffer=l.createRectangleIndices(i),this._vertexBuffer=l.createLinkedVertexBuffer(i,o,"a_position","a_texcoord"),this._transformUniformLocation=l.getUniformLocation(i,o,"u_transformation"),this._opacityUniformLocation=l.getUniformLocation(i,o,"u_opacity"),this._textureUniformLocation=l.getUniformLocation(i,o,"u_texture")}return e.prototype.clear=function(e,t,n,r){l.clearCanvas(this.gl,{r:e,g:t,b:n,a:r})},e.prototype.resizeCanvas=function(){l.resizeCanvas(this.gl,this.resolution)},Object.defineProperty(e.prototype,"width",{set:function(e){this._screenSize.width=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{set:function(e){this._screenSize.height=e},enumerable:!1,configurable:!0}),e.prototype.flush=function(){this.gl.flush()},e.prototype.render=function(e){e.calcRenderingInfos(),e.texture&&this.renderSprite(e);for(var t=e.children,n=0,r=t.length;n<r;n++)this.render(t[n])},e.prototype.renderSprite=function(e){var t=e.texture;if(t){var n=t.glTexture,r=this.gl,i=this._textureUniformLocation;r.useProgram(this._program),r.uniform1i(i,0),r.activeTexture(r.TEXTURE0+0),r.bindTexture(r.TEXTURE_2D,n);var o=f.projection(this._screenSize.width,this._screenSize.height),a=f.scaling(t.scale.x,t.scale.y),u=f.someMultiply(o,e.parentTransform,e.transform,a);r.uniformMatrix3fv(this._transformUniformLocation,!1,u);var s=e.opacity,c=e.parentOpacity*s;r.uniform1f(this._opacityUniformLocation,c);var l=this._vertexBuffer;r.bindBuffer(r.ARRAY_BUFFER,l);var d={w:t.width,h:t.height},h=[0,0,0,0,0,d.h,0,1,d.w,0,1,0,d.w,d.h,1,1];r.bufferData(r.ARRAY_BUFFER,new Float32Array(h),r.DYNAMIC_DRAW);var p=this._indexBuffer;r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,p),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null),r.bindBuffer(r.ARRAY_BUFFER,null),r.bindTexture(r.TEXTURE_2D,null)}},e}();t.default=d},483:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.checkGL=function(){if(e.gl)return e.gl;throw new Error("There seems to be no canvas")},e}();t.default=n},627:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.x=1,e.y=1,e}();t.default=n},59:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SCALE_MODE=void 0;var u,s=a(n(483)),c=o(n(97));!function(e){e.LINEAR="LINEAR",e.NEAREST="NEAREST"}(u=t.SCALE_MODE||(t.SCALE_MODE={}));var l=n(309),f=function(){function e(e,t){void 0===t&&(t=u.NEAREST),this._width=0,this._height=0,this._scale=new l.TwoDemensionParam,this.scaleMode=u.NEAREST,this.scaleMode=t;var n=s.default.checkGL(),r=c.createTexture(n,t);e?(this.glTexture=c.uploadTexture(n,r,e),this._width=e.width,this._height=e.height):this.glTexture=r}return Object.defineProperty(e.prototype,"texture",{set:function(e){var t=s.default.checkGL();this.glTexture=c.uploadTexture(t,this.glTexture,e),this._width=e.width,this._height=e.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e}();t.default=f}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(607)})()},800:e=>{self,e.exports=(()=>{"use strict";var e={178:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(108)),o=r(n(557)),a=n(894),u=function(){function e(){this.loader=i.default,this.baseMixer=new a.MasterMixer,this._unlockEvents=["click","scroll","touchstart"];for(var e=0,t=this._unlockEvents.length;e<t;e++)document.addEventListener(this._unlockEvents[e],this._initContext.bind(this),{once:!0});this._initContext()}return e.prototype._initContext=function(){"suspended"===o.default.cxt.state&&o.default.cxt.resume();for(var e=0,t=this._unlockEvents.length;e<t;e++)document.removeEventListener(this._unlockEvents[e],this._initContext.bind(this))},e.prototype.addResource=function(e,t){return this.loader.add(e,t),this},e.prototype.loadAll=function(){this.loader.loadAll()},e.prototype.loadThen=function(e){this.loader.loadThen(e)},Object.defineProperty(e.prototype,"loaded",{get:function(){return this.loader.loaded},enumerable:!1,configurable:!0}),e}();t.default=u},557:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=window.AudioContext||window.webkitAudioContext,r=function(){function e(){}return e.cxt=new n,e}();t.default=r},385:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){this.buffer=e,this.duration=e.duration}},607:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=t.Processer=t.Sound=t.Mixer=t.App=void 0;var i=r(n(501));t.Sound=i.default;var o=r(n(178));t.App=o.default;var a=r(n(894));t.Mixer=a.default;var u=r(n(412));t.Processer=u.default;var s=r(n(108));t.Loader=s.default},108:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(557)),o=r(n(385)),a=function(){function e(){}return e.add=function(e,t){var n=this._promiseLoadingSound(e,t);return this._tasks.push(n),this.loaded=!1,this},e.loadAll=function(){var e=this;this._taskNum=this._tasks.length,this._progressManager(this._taskNum,this._taskNum),Promise.all(this._tasks).then((function(){e.loaded=!0,e._loadThen()}))},e.loadThen=function(e){this._loadThen=e,0===this._tasks.length&&e()},e._promiseLoadingSound=function(e,t){var n=this;return new Promise((function(r){fetch(t).then((function(e){return e.arrayBuffer()})).then((function(e){return n._cxt.decodeAudioData(e)})).then((function(t){var i=new o.default(t);n._resources.set(e,i),n._tasks.shift(),n._progressManager(n._taskNum,n._tasks.length),r(t)}))}))},e.manageProgress=function(e){this._progressManager=e},e.get=function(e){return this._resources.get(e)},e._resources=new Map,e._tasks=[],e._loadThen=function(){},e._cxt=i.default.cxt,e._progressManager=function(){},e._taskNum=0,e.loaded=!1,e}();t.default=a},341:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultDelayParams=void 0;var i=r(n(557)),o={interval:1e3,attenuation:.5};t.defaultDelayParams=o;var a=function(){function e(e,t){this._interval=o.interval,this._attenuation=o.attenuation,this._delayNode=i.default.cxt.createDelay(10),this._attenuationNode=i.default.cxt.createGain(),this._delaySwitch=i.default.cxt.createGain(),this._realScale=1,t?(t.interval=t.interval||o.interval,t.attenuation=t.attenuation||o.attenuation):t=o,this.interval=t.interval,this.attenuation=t.attenuation,e.connect(this._delayNode),this._delayNode.connect(this._attenuationNode),this._attenuationNode.connect(this._delayNode),this._delayNode.connect(this._delaySwitch)}return Object.defineProperty(e.prototype,"interval",{get:function(){return this._interval},set:function(e){e=Math.min(Math.max(e,0),1e4),this._interval=e,this._delayNode.delayTime.value=e/1e3*this._realScale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attenuation",{get:function(){return this._attenuation},set:function(e){this._attenuation=e,this._attenuationNode.gain.value=e},enumerable:!1,configurable:!0}),e.prototype.set=function(e,t){this.interval=e,this.attenuation=t},Object.defineProperty(e.prototype,"realScale",{set:function(e){this._realScale=e,this._delayNode.delayTime.value=this._interval/1e3*e},enumerable:!1,configurable:!0}),e.prototype.connect=function(e){this._delaySwitch.connect(e)},e.prototype.disconnect=function(){this._delaySwitch.disconnect(0)},e}();t.default=a},844:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(557)),o={x:0,y:0,z:0},a=function(){function e(e,t,n){this._pannerNode=i.default.cxt.createPanner(),this._position=o,e&&(this.x=e),t&&(this.y=t),n&&(this.z=n)}return Object.defineProperty(e.prototype,"x",{get:function(){return this._position.x},set:function(e){this._position.x=e,this._pannerNode.positionX.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._position.y},set:function(e){this._pannerNode.positionY.value=e,this._position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._position.z},set:function(e){this._pannerNode.positionZ.value=e,this._position.z=e},enumerable:!1,configurable:!0}),e.prototype.set=function(e,t,n){return this.x=e,this.y=t,this.z=n,this},Object.defineProperty(e.prototype,"node",{get:function(){return this._pannerNode},enumerable:!1,configurable:!0}),e.prototype.connect=function(e){this._pannerNode.connect(e)},e}();t.default=a},894:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MasterMixer=t.defaultOptions=void 0;var a=o(n(557)),u=o(n(341)),s=o(n(844)),c=n(341);t.defaultOptions={volume:1,loop:!1,scale:1,delay:c.defaultDelayParams,useDelay:!1,panner:{x:0,y:0,z:0}};var l=function(){function e(e){this._cxt=a.default.cxt,this._inputNode=a.default.cxt.createGain(),this._gainNode=a.default.cxt.createGain(),this._volume=t.defaultOptions.volume,this._scale=t.defaultOptions.scale,this._duration=0,this._playedTime=0,this._startedTime=0,this._position=0,this.children=[],this.isSound=!1,this._playPosition=0,this._playScale=1,this.playAction=function(){},this.stopAction=function(){},this.pauseAction=function(){},this.restartAction=function(){},e||(e=t.defaultOptions);var n=e.panner||t.defaultOptions.panner;this._panner=new s.default(n.x,n.y,n.z),this._delay=new u.default(this._inputNode,e.delay||t.defaultOptions.delay),this.volume=e.volume||t.defaultOptions.volume,this.scale=e.scale||t.defaultOptions.scale,this._useDelay=e.useDelay||t.defaultOptions.useDelay,this.useDelay=this._useDelay,this._inputNode.connect(this._panner.node),this._panner.connect(this._gainNode)}return Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(e){this._position=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useDelay",{get:function(){return this._useDelay},set:function(e){this._useDelay=e,e?this._delay.connect(this._gainNode):this._delay.disconnect()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),e.prototype.addChildren=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e.length;n<r;n++)this.addChild(e[n])},e.prototype.addChild=function(e){this.children.push(e),e.connect(this._inputNode),e.parent=this},e.prototype.connect=function(e){this._gainNode.connect(e)},Object.defineProperty(e.prototype,"playScale",{get:function(){return this._playScale},set:function(e){this._playScale=e,this._delay.realScale=e},enumerable:!1,configurable:!0}),e.prototype.play=function(){this._propagateOrder("play")},e.prototype.stop=function(){this._propagateOrder("stop")},e.prototype.pause=function(){this._propagateOrder("pause")},e.prototype.restart=function(){this._propagateOrder("restart")},e.prototype._propagateOrder=function(e,t){var n=this;this._playPosition=this._calcPlayPosition(t),this.playScale=this._calcPlayScale(t),this.children.forEach((function(t){t._propagateOrder(e,n)})),this[e+"Action"]()},e.prototype._calcPlayPosition=function(e){return e?e._playPosition+this._position*e._playScale:0},e.prototype._calcPlayScale=function(e){return e?e._playScale*this._scale:this._scale},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(e){this._volume=e,this._gainNode.gain.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},set:function(e){this._scale=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"panner",{get:function(){return this._panner},enumerable:!1,configurable:!0}),e}();t.default=l;var f=function(e){function t(){var t=e.call(this)||this;return t.connect(a.default.cxt.destination),t}return i(t,e),t}(l);t.MasterMixer=f},412:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(557)),o=r(n(385)),a=function(){function e(){}return e._forAllChannels=function(e,t,n){for(var r=0,i=e.numberOfChannels;r<i;r++)n(t.getChannelData(r),e.getChannelData(r));return t},e._createSameSizedBuffer=function(e){return i.default.cxt.createBuffer(e.numberOfChannels,e.length,e.sampleRate)},e.reverse=function(t){var n=t.buffer,r=e._createSameSizedBuffer(n);return new o.default(e._forAllChannels(n,r,(function(e,t){for(var r=0,i=n.length;r<i;r++)e[r]=t[i-r]})))},e.trim=function(t,n,r){var a=t.buffer,u=a.sampleRate,s=(r-n)*a.sampleRate,c=i.default.cxt.createBuffer(a.numberOfChannels,s,u);return new o.default(e._forAllChannels(a,c,(function(e,t){for(var r=0,i=s;r<i;r++)e[r]=t[n*u+r]})))},e.raisePitch=function(t,n,r){var a=t.buffer,u=i.default.cxt.createBuffer(a.numberOfChannels,a.length,a.sampleRate);return new o.default(e._forAllChannels(a,u,(function(e,t){for(var i=0,o=a.length/n;i<o;i++)for(var u=0,s=n;u<s;u++)e[i*n+u]=t[Math.min(i*n+(u*r|0)%n,a.length-1)]})))},e.lowerPitch=function(t,n,r){var i=t.buffer,a=e._createSameSizedBuffer(i);return new o.default(e._forAllChannels(i,a,(function(e,t){for(var o=0,a=i.length/n;o<a;o++)for(var u=0,s=n*r;u<s;u++)e[o*n+u]=t[Math.min(o*n+(u/r|0),i.length-1)]})))},e.noise=function(t,n,r,i){var a=t.buffer,u=e._createSameSizedBuffer(a);return new o.default(e._forAllChannels(a,u,(function(e,t){for(var o=0,u=a.length;o<u;o++)Math.random()>n?e[o]=t[o]+2*(Math.random()-.5)*i:e[o]=2*r*(Math.random()-.5)})))},e.blur=function(t,n){var r=t.buffer,i=e._createSameSizedBuffer(r);return new o.default(e._forAllChannels(r,i,(function(e,t){for(var i=0,o=r.length;i<o;i++){for(var a=0,u=2*n+1,s=0,c=u;s<c;s++)a+=t[Math.max(Math.min(i-n+s,r.length-1),0)];e[i]=a/u}})))},e}();t.default=a},501:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(894),u=1e3,s=Object.assign(a.defaultOptions,{loop:!1}),c=function(e){function t(t,n){var r=e.call(this,n)||this;return r._duration=0,r._loop=!1,r._playing=!1,r.isSound=!0,r.restartAction=function(){r._play(r._playedTime)},r.playAction=function(){r._playedTime=0,r._play(0)},r.stopAction=function(){r._playing&&r._sourceNode&&(r._sourceNode.stop(0),r._sourceNode.disconnect(0),r._endThen())},r.pauseAction=function(){r._playing&&(r._playedTime=(r._playedTime+r._cxt.currentTime-r._startedTime)%(r._duration/u),r._playing=!1,r._sourceNode.stop(0))},r._audio=t,t&&(r._duration=t.duration*u),n||(n=s),r.loop=n.loop||s.loop,r}return i(t,e),Object.defineProperty(t.prototype,"audio",{set:function(e){this._audio=e,this._duration=e.duration},enumerable:!1,configurable:!0}),t.prototype._play=function(e){if(void 0===e&&(e=0),this._audio){var t=this._cxt;this._sourceNode=t.createBufferSource(),this._sourceNode.buffer=this._audio.buffer,this._sourceNode.loop=this._loop;var n=this._playScale,r=this._playPosition;this._sourceNode.playbackRate.value=1/n;var i=this._sourceNode;i.connect(this._inputNode);var o=t.currentTime+r/u;if(i.start(o,e),this._sourceNode=i,this._startedTime=o,this._playing=!0,!this.loop){var a=r+this._duration*n;setTimeout(this._disconnectSourceNode.bind(this),a,i),this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=void 0),this._endTimer=setTimeout(this._endThen.bind(this),a)}}},t.prototype._disconnectSourceNode=function(e){e.disconnect(0)},t.prototype._endThen=function(){this._playing=!1,this._playedTime=0,this._sourceNode=null,this._endTimer=void 0},Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(e){this._loop=e,this._sourceNode&&(this._sourceNode.loop=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),t}(o(n(894)).default);t.default=c}},t={};return function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(607)})()},614:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(908)),u=n(450),s=function(e){function t(t){var n=e.call(this)||this;return n.sprite=new u.Sprite(t),n.stage.addChild(n.sprite),n}return i(t,e),t}(a.default);t.default=s},339:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(614));t.default=i.default},962:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(450)),s=o(n(800)),c=a(n(941)),l=a(n(908)),f={width:300,height:400,autoStart:!1,canvas:document.createElement("canvas"),autoStyleCanvas:!1},d=function(){function e(e){var t=this;this.ticker=new c.default,this._width=0,this._height=0,this._loadThen=function(){},this.mainLoop=function(e,n){t.renderSystem.clearScreen(0,0,0,1),t.baseScene.update(e,n),t.renderSystem.render()},e=Object.assign(f,e),this._width=e.width,this._height=e.height,this.renderSystem=new u.App({width:this._width,height:this._height,canvas:e.canvas}),this.soundSystem=new s.App,this.baseScene=new l.default,this.renderSystem.baseStage.addChild(this.baseScene.stage),this.soundSystem.baseMixer.addChild(this.baseScene.mixer),this.renderSystem.loader.loadThen((function(){t.soundSystem.loaded&&t._loadThen()})),this.soundSystem.loader.loadThen((function(){t.renderSystem.loaded&&t._loadThen()})),this.ticker.add(this.mainLoop.bind(this)),e.autoStart&&this.ticker.start()}return e.prototype.start=function(){this.ticker.start()},e.prototype.addImage=function(e,t){return this.renderSystem.addResource(e,t),this},e.prototype.addSound=function(e,t){return this.soundSystem.addResource(e,t),this},e.prototype.loadAll=function(){this.renderSystem.loadAll(),this.soundSystem.loadAll()},e.prototype.getTexture=function(e){return this.renderSystem.loader.get(e)},e.prototype.getAudio=function(e){return this.soundSystem.loader.get(e)},e.prototype.loadThen=function(e){this._loadThen=e},e}();t.default=d},495:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(962));t.default=i.default},607:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TextureLoader=t.Text=t.Stage=t.Sprite=t.SoundLoader=t.Mixer=t.Sound=t.Actor=t.Scene=t.App=void 0;var u=a(n(495));t.App=u.default;var s=a(n(908));t.Scene=s.default;var c=a(n(339));t.Actor=c.default;var l=o(n(450)),f=o(n(800)),d=l.Sprite,h=l.Stage,p=l.Text,_=l.Loader;t.Sprite=d,t.Stage=h,t.Text=p,t.TextureLoader=_;var y=f.Sound,v=f.Mixer,g=f.Loader;t.Sound=y,t.Mixer=v,t.SoundLoader=g},908:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(934));t.default=i.default},934:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(450),i=n(800),o=function(){function e(){this.children=new Set,this.stage=new r.Stage,this.mixer=new i.Mixer,this.needsInfoNames=new Set}return e.prototype.act=function(e,t){},e.prototype.update=function(e,t){var n=this;this.act(e,t),this.children.forEach((function(t){var r={};t.needsInfoNames.forEach((function(e){r[e]=n[e]})),t.update(e,r)}))},e.prototype.needs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e.length;n<r;n++)this.needsInfoNames.add(e[n]);return this},e.prototype.unneeds=function(e){return this.needsInfoNames.delete(e),this},e.prototype.addChild=function(e){return this.stage.addChild(e.stage),this.mixer.addChild(e.mixer),this.children.add(e),this},e.prototype.removeChild=function(e){return this.stage.removeChild(e.stage),this.mixer.removeChild(e.mixer),this.children.delete(e),this},e.prototype.addSprite=function(e){return this.stage.addChild(e),this},e.prototype.addSound=function(e){return this.mixer.addChild(e),this},e}();t.default=o},941:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(414));t.default=i.default},414:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=this;this._FPS=60,this._ecpectedElapsedTime=1e3/this._FPS,this.permittedDelay=2,this._tickFunctions=new Set,this._prevTimeStamp=0,this._mainloop=function(t){var n=e._calcDelta(t);e._tickFunctions.forEach((function(e){e(n)})),e._animationRequest=requestAnimationFrame(e._mainloop.bind(e))}}return e.prototype._calcDelta=function(e){var t=this._prevTimeStamp-e;return this._prevTimeStamp=e,Math.min(t/this._ecpectedElapsedTime,this.permittedDelay)},e.prototype.start=function(){this._animationRequest=requestAnimationFrame(this._mainloop)},e.prototype.stop=function(){this._animationRequest&&cancelAnimationFrame(this._animationRequest)},e.prototype.add=function(e){return this._tickFunctions.add(e),this},e.prototype.remove=function(e){this._tickFunctions.delete(e)},Object.defineProperty(e.prototype,"FPS",{get:function(){return this._FPS},set:function(e){this._FPS=e,this._ecpectedElapsedTime=1e3/this._FPS},enumerable:!1,configurable:!0}),e}();t.default=n}},t={},function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(607);var e,t}));