!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("UGOCAS",[],e):"object"==typeof exports?exports.UGOCAS=e():t.UGOCAS=e()}(self,(function(){return t={450:t=>{self,t.exports=(()=>{"use strict";var t={840:(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});const r="#version 300 es\r\nprecision highp float;\r\n\r\nin vec2 v_texcoord;\r\n\r\nuniform sampler2D u_texture;\r\n\r\nuniform float u_opacity;\r\n\r\nout vec4 outColor;\r\n\r\nvoid main() {\r\n   outColor = texture(u_texture, v_texcoord) * vec4(1, 1, 1, u_opacity);\r\n}"},289:(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});const r="#version 300 es\r\n \r\nin vec2 a_position;\r\nin vec2 a_texcoord;\r\n \r\nuniform mat3 u_transformation;\r\n \r\nout vec2 v_texcoord;\r\n \r\nvoid main() {\r\n   v_texcoord = a_texcoord;\r\n\r\n   gl_Position = vec4((u_transformation * vec3(a_position, 1)).xy, 0, 1);\r\n}"},178:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultResolution=void 0;var o=r(n(947)),i=r(n(108)),a=r(n(627)),u=r(n(991)),s=n(236),c={width:300,height:150,canvas:document.createElement("canvas"),autoStyleCanvas:!1};e.defaultResolution={x:1,y:1};var l=function(){function t(t){this.loader=i.default,t||(t=c);var e=t.width||c.width,n=t.height||c.height,r=t.canvas||c.canvas,l=t.autoStyleCanvas||c.autoStyleCanvas;this.baseStage=new s.BaseStage(e,n),this._canvas=r,l&&(this._canvas.style.width="".concat(e,"px"),this._canvas.style.height="".concat(n,"px")),this._screenSize={width:e,height:n},this.renderer=new o.default({canvas:r,width:this._screenSize.width,height:this._screenSize.height}),a.default.x=this._resolutionX,a.default.y=this._resolutionY,u.default.canvas=r,u.default.on(),u.default.screenSize=this._screenSize}return Object.defineProperty(t.prototype,"width",{set:function(t){this._screenSize.width=t,this.renderer.width=t,a.default.x=this._resolutionX},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{set:function(t){this._screenSize.height=t,this.renderer.height=t,a.default.y=this._resolutionY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_resolutionX",{get:function(){return this.renderer.resolution*this._canvas.width/this._screenSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_resolutionY",{get:function(){return this.renderer.resolution*this._canvas.height/this._screenSize.height},enumerable:!1,configurable:!0}),t.prototype.render=function(){this.renderer.render(this.baseStage),this.renderer.flush()},t.prototype.clearScreen=function(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.renderer.clear(t,e,n,r)},t.prototype.addResource=function(t,e){this.loader.add(t,e)},t.prototype.loadAll=function(){this.loader.loadAll()},Object.defineProperty(t.prototype,"loaded",{get:function(){return this.loader.loaded},enumerable:!1,configurable:!0}),t}();e.default=l},309:function(t,e){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.TwoDemensionParam=void 0;var o,i=function(){function t(){this._x=1,this._y=1}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!1,configurable:!0}),t.prototype.set=function(t,e){this._x=t,this._y=e||t},t}();e.TwoDemensionParam=i,r((function(){var t=o.call(this)||this;return t._x=0,t._y=0,t}),o=i);var a=function(){function t(){this._position=new i,this._opacity=1,this._scale=new i,this.rotation=0}return Object.defineProperty(t.prototype,"opacity",{get:function(){return this._opacity},set:function(t){this._opacity=Math.min(Math.max(t,0),1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),t}();e.default=a},479:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n,r){this.x=0,this.y=0,this.w=0,this.h=0,this.x=t,this.y=e,this.w=n,this.h=r}return t.prototype.detectPointHit=function(t,e){return this.x<t&&this.x+this.w>t&&this.y<e&&this.y+this.h>e},t}();e.default=n},339:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this)||this;return e&&(n.texture=e),n}return o(e,t),e}(i(n(236)).default);e.default=a},236:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),u=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return a(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStage=void 0;var c=s(n(309)),l=n(309),f=s(n(991)),d=u(n(179)),h=s(n(479)),p=n(991),_=function(t){function e(){var e=t.call(this)||this;return e._x=0,e._y=0,e}return o(e,t),e}(l.TwoDemensionParam),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anchor=new _,e.transform=d.identity(),e.parentTransform=d.identity(),e.parentOpacity=1,e.parent=void 0,e.isOnStage=!1,e._size={width:0,height:0},e._eventsArys={pointerdown:[],pointerup:[],pointermove:[]},e.children=[],e}return o(e,t),e.prototype.calcRenderingInfos=function(){this.transform=this._calculateTransform(),this.parentTransform=this._calculateParentTransform(),this.parentOpacity=this._calculateParentOpacity()},e.prototype.addChild=function(t){this.children.push(t),t.parent=this,this.isOnStage&&(t.isOnStage=!0,p.events.forEach((function(e){t._eventsArys[e].forEach((function(t){f.default.add(e,t)}))})))},e.prototype.removeChild=function(t){this.children.splice(this.children.indexOf(t),1),t.parent=void 0,t.isOnStage=!1},e.prototype._calculateTransform=function(){var t=d.translation(this.position.x,this.position.y),e=d.scaling(this.scale.x,this.scale.y),n=d.rotation(this.rotation),r=d.translation(-this.anchor.x,-this.anchor.y);return d.someMultiply(t,n,e,r)},e.prototype._calculateParentTransform=function(){return this.parent?d.multiply(this.parent.parentTransform,this.parent.transform):d.identity()},e.prototype._calculateParentOpacity=function(){return this.parent?this.parent.parentOpacity*this.parent.opacity:1},Object.defineProperty(e.prototype,"worldScale",{get:function(){if(this.parent){var t=this.parent,e=t.worldScale;return{x:e.x*t.scale.x,y:e.y*t.scale.y}}return{x:1,y:1}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldPosition",{get:function(){if(this.parent){var t=this.parent,e=t.worldPosition,n=t.worldScale;return{x:e.x+t.position.x*n.x,y:e.y+t.position.y*n.y}}return{x:0,y:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._size.width},set:function(t){this._size.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._size.height},set:function(t){this._size.height=t},enumerable:!1,configurable:!0}),e.prototype.addEventListener=function(t,e){var n={target:this,callback:e};this._eventsArys[t].push(n),this.isOnStage&&f.default.add(t,n)},e.prototype.getBoundingRect=function(){var t=this.worldScale,e=this.worldPosition,n=e.x+(this.position.x-this.anchor.x)*t.x,r=e.y+(this.position.y-this.anchor.y)*t.y,o=(this.texture?this.texture.width*this.texture.scale.x:this._size.width)*this.scale.x*t.x,i=(this.texture?this.texture.height*this.texture.scale.y:this._size.height)*this.scale.y*t.y;return new h.default(n,r,o,i)},e}(c.default);e.default=y;var v=function(t){function e(e,n){var r=t.call(this)||this;return r.isOnStage=!0,r._size={width:e,height:n},r}return o(e,t),e}(y);e.BaseStage=v},736:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(339)),u=i(n(59)),s=i(n(627)),c=n(59),l={font:"sans-serif",fontSize:20,fill:"#f00",strokeWidth:0,stroke:"#000",shadow:"",shadowX:1,shadowY:1,shadowBlur:0},f=function(t){function e(e,n){var r=t.call(this)||this;for(var o in r._text="",r._canvas=document.createElement("canvas"),r._resolution=s.default,r._text=e||"",n=n||l,r._style=n,l)r._style[o]=n[o]||l[o];return r.texture=new u.default(void 0,c.SCALE_MODE.LINEAR),r._updateCanvasTexture(),r}return o(e,t),e.prototype._drawCanvas=function(){var t=this._canvas,e=t.getContext("2d"),n=this._style,r=this._text;t.width=2,t.height=2,e.font="".concat(n.fontSize,"px ").concat(n.font),e.textBaseline="top";var o=e.measureText(r),i=o.width+(n.shadow?n.shadowX:0),a=o.actualBoundingBoxDescent-o.actualBoundingBoxAscent+(n.shadow?n.shadowY:0);t.width=i*this._resolution.x,t.height=a*this._resolution.y,e.scale(this._resolution.x,this._resolution.y),e.clearRect(0,0,t.width,t.height),e.beginPath(),n.shadow&&(e.shadowOffsetX=n.shadowX,e.shadowOffsetY=n.shadowY,e.shadowBlur=n.shadowBlur,e.shadowColor=n.shadow),e.font="".concat(n.fontSize,"px ").concat(n.font),e.textBaseline="top",e.fillStyle=n.fill,e.fillText(r,0,0),e.closePath(),e.beginPath(),n.strokeWidth&&(e.shadowOffsetX=0,e.shadowOffsetY=0,e.lineWidth=n.strokeWidth,e.strokeStyle=n.stroke,e.strokeText(r,0,0)),this.texture.scale.x=1/this._resolution.x,this.texture.scale.y=1/this._resolution.y},Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t,this._updateCanvasTexture()},enumerable:!1,configurable:!0}),e.prototype._updateCanvasTexture=function(){this._drawCanvas(),this.texture.texture=this._canvas},Object.defineProperty(e.prototype,"style",{get:function(){return this._updateCanvasTexture(),this._style},enumerable:!1,configurable:!0}),e}(a.default);e.default=f},607:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Loader=e.Text=e.Stage=e.Texture=e.Sprite=e.App=void 0;var o=r(n(178));e.App=o.default;var i=r(n(339));e.Sprite=i.default;var a=r(n(59));e.Texture=a.default;var u=r(n(236));e.Stage=u.default;var s=r(n(736));e.Text=s.default;var c=r(n(108));e.Loader=c.default},991:function(t,e){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.events=void 0;var r=["pointerdown","pointerup","pointermove"];e.events=r;var o=function(){function t(){}var e;return t._getPointerCo=function(t){var e=this._canvasSize;return{x:t.offsetX*this.screenSize.width/e.w,y:t.offsetY*this.screenSize.height/e.h}},t.on=function(){var t,e,o,i=this,a=function(t){null===(o=u._canvas)||void 0===o||o.addEventListener(t,(function(e){var n=i._getPointerCo(e);i._dispatchEvents(t,n)}))},u=this;try{for(var s=n(Object.values(r)),c=s.next();!c.done;c=s.next())a(c.value)}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}},t._dispatchEvents=function(t,e){for(var n=this._eventsArys[t],r=0,o=n.length;r<o;r++){var i=n[r],a=i.target;a.isOnStage&&a.getBoundingRect().detectPointHit(e.x,e.y)&&i.callback()}},Object.defineProperty(t,"canvas",{set:function(t){this._canvas=t,this._canvasSize=this._getCanvasSize(t),this._resizeObserver.observe(document.body)},enumerable:!1,configurable:!0}),t._getCanvasSize=function(t){return{w:t.clientWidth,h:t.clientHeight}},t.add=function(t,e){this._eventsArys[t].push({target:e.target,callback:e.callback})},e=t,t.screenSize={width:0,height:0},t._canvasSize={w:0,h:0},t._eventsArys={pointerup:[],pointerdown:[],pointermove:[]},t._resizeObserver=new ResizeObserver((function(){e._canvasSize=e._getCanvasSize(e._canvas)})),t}();e.default=o},108:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(59)),i=n(59),a=function(){function t(){}return t.add=function(t,e,n){this.loaded=!1;var r=this._promiseLoadingImage(t,e,n);return this._tasks.push(r),this},t.loadAll=function(){var t=this;this._taskNum=this._tasks.length,this._progressManager(this._taskNum,this._taskNum),Promise.all(this._tasks).then((function(){t.loaded=!0,t._loadThen()}))},t._promiseLoadingImage=function(t,e,n){var r=this;return void 0===n&&(n="NEAREST"),new Promise((function(a){fetch(e).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t)})).then((function(e){r._resources.set(t,new o.default(e,i.SCALE_MODE[n])),r._tasks.shift(),r._progressManager(r._taskNum,r._tasks.length),a(e)}))}))},t.loadThen=function(t){this._loadThen=t,0===this._tasks.length&&t()},t.manageProgress=function(t){this._progressManager=t},t.get=function(t){return this._resources.has(t)?this._resources.get(t):void 0},t._resources=new Map,t._tasks=[],t._loadThen=function(){},t._taskNum=0,t._progressManager=function(){},t.loaded=!1,t}();e.default=a},179:(t,e)=>{function n(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=e[0],d=e[1],h=e[2],p=e[3],_=e[4],y=e[5],v=e[6],b=e[7],g=e[8];return[f*n+d*i+h*s,f*r+d*a+h*c,f*o+d*u+h*l,p*n+_*i+y*s,p*r+_*a+y*c,p*o+_*u+y*l,v*n+b*i+g*s,v*r+b*a+g*c,v*o+b*u+g*l]}Object.defineProperty(e,"__esModule",{value:!0}),e.identity=e.someMultiply=e.multiply=e.rotation=e.translation=e.scaling=e.projection=void 0,e.projection=function(t,e){return[2/t,0,0,0,-2/e,0,-1,1,1]},e.scaling=function(t,e){return[t,0,0,0,e,0,0,0,1]},e.translation=function(t,e){return[1,0,0,0,1,0,t,e,1]},e.rotation=function(t){var e=Math.sin(t),n=Math.cos(t);return[n,-e,0,e,n,0,0,0,1]},e.multiply=n,e.someMultiply=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t[0],o=0,i=t.length-1;o<i;o++)r=n(r,t[o+1]);return r},e.identity=function(){return[1,0,0,0,1,0,0,0,1]}},478:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.enableAlpha=void 0,e.enableAlpha=function(t){t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0)}},144:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createRectangleIndices=e.createLinkedVertexBuffer=void 0,e.createLinkedVertexBuffer=function(t,e,n,r){var o=t.getAttribLocation(e,n),i=t.getAttribLocation(e,r);t.enableVertexAttribArray(o),t.enableVertexAttribArray(i);var a=t.FLOAT,u=4*Float32Array.BYTES_PER_ELEMENT,s=2*Float32Array.BYTES_PER_ELEMENT,c=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,c),t.vertexAttribPointer(o,2,a,!1,u,0),t.vertexAttribPointer(i,2,a,!1,u,s),t.bindBuffer(t.ARRAY_BUFFER,null),c},e.createRectangleIndices=function(t){var e=new Uint16Array([0,1,2,1,3,2]),n=function(t,e,n){var r=t.createBuffer();return t.bindBuffer(e,r),t.bufferData(e,n,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),r}(t,t.ELEMENT_ARRAY_BUFFER,e);return n}},484:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.resizeCanvas=e.clearCanvas=void 0,e.clearCanvas=function(t,e){var n=e.r/256,r=e.g/256,o=e.b/256,i=void 0===e.a?1:e.a;t.clearColor(n,r,o,i),t.clear(t.COLOR_BUFFER_BIT)},e.resizeCanvas=function(t,e){var n=t.canvas,r=n.clientWidth,o=n.clientHeight;n.width=r*e,n.height=o*e,t.viewport(0,0,n.width,n.height)}},97:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getUniformLocation=e.resizeCanvas=e.clearCanvas=e.enableAlpha=e.uploadTexture=e.createTexture=e.createLinkedVertexBuffer=e.createRectangleIndices=e.createProgram=void 0;var r=n(381);Object.defineProperty(e,"createProgram",{enumerable:!0,get:function(){return r.createProgram}});var o=n(144);Object.defineProperty(e,"createLinkedVertexBuffer",{enumerable:!0,get:function(){return o.createLinkedVertexBuffer}}),Object.defineProperty(e,"createRectangleIndices",{enumerable:!0,get:function(){return o.createRectangleIndices}});var i=n(363);Object.defineProperty(e,"createTexture",{enumerable:!0,get:function(){return i.createTexture}}),Object.defineProperty(e,"uploadTexture",{enumerable:!0,get:function(){return i.uploadTexture}});var a=n(478);Object.defineProperty(e,"enableAlpha",{enumerable:!0,get:function(){return a.enableAlpha}});var u=n(484);Object.defineProperty(e,"clearCanvas",{enumerable:!0,get:function(){return u.clearCanvas}}),Object.defineProperty(e,"resizeCanvas",{enumerable:!0,get:function(){return u.resizeCanvas}});var s=n(383);Object.defineProperty(e,"getUniformLocation",{enumerable:!0,get:function(){return s.getUniformLocation}})},381:(t,e)=>{function n(t,e,n){var r=t.createShader(e);if(!r)throw new Error("failed to create a shader");return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)||(console.log(t.getShaderInfoLog(r)),t.deleteShader(r)),r}Object.defineProperty(e,"__esModule",{value:!0}),e.createProgram=void 0,e.createProgram=function(t,e,r){var o=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=t.createProgram();if(!r)throw new Error("failed to create program");for(var o=0,i=e.length;o<i;o++)t.attachShader(r,e[o]);return t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)||(console.log(t.getProgramInfoLog(r)),t.deleteProgram(r)),r}(t,n(t,t.VERTEX_SHADER,e),n(t,t.FRAGMENT_SHADER,r));return o}},363:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.uploadTexture=e.createTexture=void 0,e.createTexture=function(t,e){var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t[e]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.bindTexture(t.TEXTURE_2D,null),n},e.uploadTexture=function(t,e,n){return t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null),e}},383:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getUniformLocation=void 0,e.getUniformLocation=function(t,e,n){return t.getUniformLocation(e,n)}},947:function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=a(n(483)),s=a(n(289)),c=a(n(840)),l=i(n(97)),f=i(n(179)),d=function(){function t(t){this.resolution=window.devicePixelRatio||1;var e=t.canvas,n=t.width,r=t.height;this.canvas=e,this._screenSize={width:n,height:r},this.gl=this.canvas.getContext("webgl2");var o=this.gl;u.default.gl=o,this.resizeCanvas(),l.enableAlpha(o);var i=l.createProgram(o,s.default,c.default);this._program=i,this._indexBuffer=l.createRectangleIndices(o),this._vertexBuffer=l.createLinkedVertexBuffer(o,i,"a_position","a_texcoord"),this._transformUniformLocation=l.getUniformLocation(o,i,"u_transformation"),this._opacityUniformLocation=l.getUniformLocation(o,i,"u_opacity"),this._textureUniformLocation=l.getUniformLocation(o,i,"u_texture")}return t.prototype.clear=function(t,e,n,r){l.clearCanvas(this.gl,{r:t,g:e,b:n,a:r})},t.prototype.resizeCanvas=function(){l.resizeCanvas(this.gl,this.resolution)},Object.defineProperty(t.prototype,"width",{set:function(t){this._screenSize.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{set:function(t){this._screenSize.height=t},enumerable:!1,configurable:!0}),t.prototype.flush=function(){this.gl.flush()},t.prototype.render=function(t){t.calcRenderingInfos(),t.texture&&this.renderSprite(t);for(var e=t.children,n=0,r=e.length;n<r;n++)this.render(e[n])},t.prototype.renderSprite=function(t){var e=t.texture;if(e){var n=e.glTexture,r=this.gl,o=this._textureUniformLocation;r.useProgram(this._program),r.uniform1i(o,0),r.activeTexture(r.TEXTURE0+0),r.bindTexture(r.TEXTURE_2D,n);var i=f.projection(this._screenSize.width,this._screenSize.height),a=f.scaling(e.scale.x,e.scale.y),u=f.someMultiply(i,t.parentTransform,t.transform,a);r.uniformMatrix3fv(this._transformUniformLocation,!1,u);var s=t.opacity,c=t.parentOpacity*s;r.uniform1f(this._opacityUniformLocation,c);var l=this._vertexBuffer;r.bindBuffer(r.ARRAY_BUFFER,l);var d={w:e.width,h:e.height},h=[0,0,0,0,0,d.h,0,1,d.w,0,1,0,d.w,d.h,1,1];r.bufferData(r.ARRAY_BUFFER,new Float32Array(h),r.DYNAMIC_DRAW);var p=this._indexBuffer;r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,p),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null),r.bindBuffer(r.ARRAY_BUFFER,null),r.bindTexture(r.TEXTURE_2D,null)}},t}();e.default=d},483:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.checkGL=function(){if(t.gl)return t.gl;throw new Error("There seems to be no canvas")},t}();e.default=n},627:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.x=1,t.y=1,t}();e.default=n},59:function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.SCALE_MODE=void 0;var u,s=a(n(483)),c=i(n(97));!function(t){t.LINEAR="LINEAR",t.NEAREST="NEAREST"}(u=e.SCALE_MODE||(e.SCALE_MODE={}));var l=n(309),f=function(){function t(t,e){void 0===e&&(e=u.NEAREST),this._width=0,this._height=0,this._scale=new l.TwoDemensionParam,this.scaleMode=u.NEAREST,this.scaleMode=e;var n=s.default.checkGL(),r=c.createTexture(n,e);t?(this.glTexture=c.uploadTexture(n,r,t),this._width=t.width,this._height=t.height):this.glTexture=r}return Object.defineProperty(t.prototype,"texture",{set:function(t){var e=s.default.checkGL();this.glTexture=c.uploadTexture(e,this.glTexture,t),this._width=t.width,this._height=t.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t}();e.default=f}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}return n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(607)})()},800:t=>{self,t.exports=(()=>{"use strict";var t={178:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(108)),i=r(n(557)),a=n(894),u=function(){function t(){this.loader=o.default,this.baseMixer=new a.MasterMixer,this._unlockEvents=["click","scroll","touchstart"];for(var t=0,e=this._unlockEvents.length;t<e;t++)document.addEventListener(this._unlockEvents[t],this._initContext.bind(this),{once:!0});this._initContext()}return t.prototype._initContext=function(){"suspended"===i.default.cxt.state&&i.default.cxt.resume();for(var t=0,e=this._unlockEvents.length;t<e;t++)document.removeEventListener(this._unlockEvents[t],this._initContext.bind(this))},t.prototype.addResource=function(t,e){return this.loader.add(t,e),this},t.prototype.loadAll=function(){this.loader.loadAll()},t.prototype.loadThen=function(t){this.loader.loadThen(t)},Object.defineProperty(t.prototype,"loaded",{get:function(){return this.loader.loaded},enumerable:!1,configurable:!0}),t}();e.default=u},557:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=window.AudioContext||window.webkitAudioContext,r=function(){function t(){}return t.cxt=new n,t}();e.default=r},385:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){this.buffer=t,this.duration=t.duration}},607:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Loader=e.Processer=e.Sound=e.Mixer=e.App=void 0;var o=r(n(501));e.Sound=o.default;var i=r(n(178));e.App=i.default;var a=r(n(894));e.Mixer=a.default;var u=r(n(412));e.Processer=u.default;var s=r(n(108));e.Loader=s.default},108:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(557)),i=r(n(385)),a=function(){function t(){}return t.add=function(t,e){var n=this._promiseLoadingSound(t,e);return this._tasks.push(n),this.loaded=!1,this},t.loadAll=function(){var t=this;this._taskNum=this._tasks.length,this._progressManager(this._taskNum,this._taskNum),Promise.all(this._tasks).then((function(){t.loaded=!0,t._loadThen()}))},t.loadThen=function(t){this._loadThen=t,0===this._tasks.length&&t()},t._promiseLoadingSound=function(t,e){var n=this;return new Promise((function(r){fetch(e).then((function(t){return t.arrayBuffer()})).then((function(t){return n._cxt.decodeAudioData(t)})).then((function(e){var o=new i.default(e);n._resources.set(t,o),n._tasks.shift(),n._progressManager(n._taskNum,n._tasks.length),r(e)}))}))},t.manageProgress=function(t){this._progressManager=t},t.get=function(t){return this._resources.get(t)},t._resources=new Map,t._tasks=[],t._loadThen=function(){},t._cxt=o.default.cxt,t._progressManager=function(){},t._taskNum=0,t.loaded=!1,t}();e.default=a},341:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultDelayParams=void 0;var o=r(n(557)),i={interval:1e3,attenuation:.5};e.defaultDelayParams=i;var a=function(){function t(t,e){this._interval=i.interval,this._attenuation=i.attenuation,this._delayNode=o.default.cxt.createDelay(10),this._attenuationNode=o.default.cxt.createGain(),this._delaySwitch=o.default.cxt.createGain(),this._realScale=1,e?(e.interval=e.interval||i.interval,e.attenuation=e.attenuation||i.attenuation):e=i,this.interval=e.interval,this.attenuation=e.attenuation,t.connect(this._delayNode),this._delayNode.connect(this._attenuationNode),this._attenuationNode.connect(this._delayNode),this._delayNode.connect(this._delaySwitch)}return Object.defineProperty(t.prototype,"interval",{get:function(){return this._interval},set:function(t){t=Math.min(Math.max(t,0),1e4),this._interval=t,this._delayNode.delayTime.value=t/1e3*this._realScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attenuation",{get:function(){return this._attenuation},set:function(t){this._attenuation=t,this._attenuationNode.gain.value=t},enumerable:!1,configurable:!0}),t.prototype.set=function(t,e){this.interval=t,this.attenuation=e},Object.defineProperty(t.prototype,"realScale",{set:function(t){this._realScale=t,this._delayNode.delayTime.value=this._interval/1e3*t},enumerable:!1,configurable:!0}),t.prototype.connect=function(t){this._delaySwitch.connect(t)},t.prototype.disconnect=function(){this._delaySwitch.disconnect(0)},t}();e.default=a},844:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(557)),i={x:0,y:0,z:0},a=function(){function t(t,e,n){this._pannerNode=o.default.cxt.createPanner(),this._position=i,t&&(this.x=t),e&&(this.y=e),n&&(this.z=n)}return Object.defineProperty(t.prototype,"x",{get:function(){return this._position.x},set:function(t){this._position.x=t,this._pannerNode.positionX.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._position.y},set:function(t){this._pannerNode.positionY.value=t,this._position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._position.z},set:function(t){this._pannerNode.positionZ.value=t,this._position.z=t},enumerable:!1,configurable:!0}),t.prototype.set=function(t,e,n){return this.x=t,this.y=e,this.z=n,this},Object.defineProperty(t.prototype,"node",{get:function(){return this._pannerNode},enumerable:!1,configurable:!0}),t.prototype.connect=function(t){this._pannerNode.connect(t)},t}();e.default=a},894:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MasterMixer=e.defaultOptions=void 0;var a=i(n(557)),u=i(n(341)),s=i(n(844)),c=n(341);e.defaultOptions={volume:1,loop:!1,scale:1,delay:c.defaultDelayParams,useDelay:!1,panner:{x:0,y:0,z:0}};var l=function(){function t(t){this._cxt=a.default.cxt,this._inputNode=a.default.cxt.createGain(),this._gainNode=a.default.cxt.createGain(),this._volume=e.defaultOptions.volume,this._scale=e.defaultOptions.scale,this._duration=0,this._playedTime=0,this._startedTime=0,this._position=0,this.children=[],this.isSound=!1,this._playPosition=0,this._playScale=1,this.playAction=function(){},this.stopAction=function(){},this.pauseAction=function(){},this.restartAction=function(){},t||(t=e.defaultOptions);var n=t.panner||e.defaultOptions.panner;this._panner=new s.default(n.x,n.y,n.z),this._delay=new u.default(this._inputNode,t.delay||e.defaultOptions.delay),this.volume=t.volume||e.defaultOptions.volume,this.scale=t.scale||e.defaultOptions.scale,this._useDelay=t.useDelay||e.defaultOptions.useDelay,this.useDelay=this._useDelay,this._inputNode.connect(this._panner.node),this._panner.connect(this._gainNode)}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useDelay",{get:function(){return this._useDelay},set:function(t){this._useDelay=t,t?this._delay.connect(this._gainNode):this._delay.disconnect()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),t.prototype.addChildren=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t.length;n<r;n++)this.addChild(t[n])},t.prototype.addChild=function(t){this.children.push(t),t.connect(this._inputNode),t.parent=this},t.prototype.connect=function(t){this._gainNode.connect(t)},Object.defineProperty(t.prototype,"playScale",{get:function(){return this._playScale},set:function(t){this._playScale=t,this._delay.realScale=t},enumerable:!1,configurable:!0}),t.prototype.play=function(){this._propagateOrder("play")},t.prototype.stop=function(){this._propagateOrder("stop")},t.prototype.pause=function(){this._propagateOrder("pause")},t.prototype.restart=function(){this._propagateOrder("restart")},t.prototype._propagateOrder=function(t,e){var n=this;this._playPosition=this._calcPlayPosition(e),this.playScale=this._calcPlayScale(e),this.children.forEach((function(e){e._propagateOrder(t,n)})),this[t+"Action"]()},t.prototype._calcPlayPosition=function(t){return t?t._playPosition+this._position*t._playScale:0},t.prototype._calcPlayScale=function(t){return t?t._playScale*this._scale:this._scale},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this._gainNode.gain.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panner",{get:function(){return this._panner},enumerable:!1,configurable:!0}),t}();e.default=l;var f=function(t){function e(){var e=t.call(this)||this;return e.connect(a.default.cxt.destination),e}return o(e,t),e}(l);e.MasterMixer=f},412:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(557)),i=r(n(385)),a=function(){function t(){}return t._forAllChannels=function(t,e,n){for(var r=0,o=t.numberOfChannels;r<o;r++)n(e.getChannelData(r),t.getChannelData(r));return e},t._createSameSizedBuffer=function(t){return o.default.cxt.createBuffer(t.numberOfChannels,t.length,t.sampleRate)},t.reverse=function(e){var n=e.buffer,r=t._createSameSizedBuffer(n);return new i.default(t._forAllChannels(n,r,(function(t,e){for(var r=0,o=n.length;r<o;r++)t[r]=e[o-r]})))},t.trim=function(e,n,r){var a=e.buffer,u=a.sampleRate,s=(r-n)*a.sampleRate,c=o.default.cxt.createBuffer(a.numberOfChannels,s,u);return new i.default(t._forAllChannels(a,c,(function(t,e){for(var r=0,o=s;r<o;r++)t[r]=e[n*u+r]})))},t.raisePitch=function(e,n,r){var a=e.buffer,u=o.default.cxt.createBuffer(a.numberOfChannels,a.length,a.sampleRate);return new i.default(t._forAllChannels(a,u,(function(t,e){for(var o=0,i=a.length/n;o<i;o++)for(var u=0,s=n;u<s;u++)t[o*n+u]=e[Math.min(o*n+(u*r|0)%n,a.length-1)]})))},t.lowerPitch=function(e,n,r){var o=e.buffer,a=t._createSameSizedBuffer(o);return new i.default(t._forAllChannels(o,a,(function(t,e){for(var i=0,a=o.length/n;i<a;i++)for(var u=0,s=n*r;u<s;u++)t[i*n+u]=e[Math.min(i*n+(u/r|0),o.length-1)]})))},t.noise=function(e,n,r,o){var a=e.buffer,u=t._createSameSizedBuffer(a);return new i.default(t._forAllChannels(a,u,(function(t,e){for(var i=0,u=a.length;i<u;i++)Math.random()>n?t[i]=e[i]+2*(Math.random()-.5)*o:t[i]=2*r*(Math.random()-.5)})))},t.blur=function(e,n){var r=e.buffer,o=t._createSameSizedBuffer(r);return new i.default(t._forAllChannels(r,o,(function(t,e){for(var o=0,i=r.length;o<i;o++){for(var a=0,u=2*n+1,s=0,c=u;s<c;s++)a+=e[Math.max(Math.min(o-n+s,r.length-1),0)];t[o]=a/u}})))},t}();e.default=a},501:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(894),u=1e3,s=Object.assign(a.defaultOptions,{loop:!1}),c=function(t){function e(e,n){var r=t.call(this,n)||this;return r._duration=0,r._loop=!1,r._playing=!1,r.isSound=!0,r.restartAction=function(){r._play(r._playedTime)},r.playAction=function(){r._playedTime=0,r._play(0)},r.stopAction=function(){r._playing&&r._sourceNode&&(r._sourceNode.stop(0),r._sourceNode.disconnect(0),r._endThen())},r.pauseAction=function(){r._playing&&(r._playedTime=(r._playedTime+r._cxt.currentTime-r._startedTime)%(r._duration/u),r._playing=!1,r._sourceNode.stop(0))},r._audio=e,e&&(r._duration=e.duration*u),n||(n=s),r.loop=n.loop||s.loop,r}return o(e,t),Object.defineProperty(e.prototype,"audio",{set:function(t){this._audio=t,this._duration=t.duration},enumerable:!1,configurable:!0}),e.prototype._play=function(t){if(void 0===t&&(t=0),this._audio){var e=this._cxt;this._sourceNode=e.createBufferSource(),this._sourceNode.buffer=this._audio.buffer,this._sourceNode.loop=this._loop;var n=this._playScale,r=this._playPosition;this._sourceNode.playbackRate.value=1/n;var o=this._sourceNode;o.connect(this._inputNode);var i=e.currentTime+r/u;if(o.start(i,t),this._sourceNode=o,this._startedTime=i,this._playing=!0,!this.loop){var a=r+this._duration*n;setTimeout(this._disconnectSourceNode.bind(this),a,o),this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=void 0),this._endTimer=setTimeout(this._endThen.bind(this),a)}}},e.prototype._disconnectSourceNode=function(t){t.disconnect(0)},e.prototype._endThen=function(){this._playing=!1,this._playedTime=0,this._sourceNode=null,this._endTimer=void 0},Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._sourceNode&&(this._sourceNode.loop=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),e}(i(n(894)).default);e.default=c}},e={};return function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}(607)})()},614:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){var e=t.call(this)||this;return e.update=function(t,n){e.act(t,n),e.children.forEach((function(n){var r={};n.needsInfoNames.forEach((function(t){r[t]=e[t]})),n.update(t,r)}))},e.act=function(t,e){},e}return o(e,t),e}(i(n(908)).default);e.default=a},382:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(614)),u=n(800),s=n(450),c=function(t){function e(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=t.call(this)||this;return o._sounds=new Map,o._rotation=0,o.sprite=new s.Sprite(e),o._stage=o.sprite,n.forEach((function(t){o.addSound(t[0],t[1])})),o}return o(e,t),e.prototype.play=function(t){t?this._sounds.get(t).play():this.mixer.play()},e.prototype.stop=function(t){t?this._sounds.get(t).stop():this.mixer.stop()},e.prototype.restart=function(t){t?this._sounds.get(t).restart():this.mixer.restart()},e.prototype.pause=function(t){t?this._sounds.get(t).pause():this.mixer.pause()},e.prototype.addSound=function(t,e){var n=new u.Sound(e);this.mixer.addChild(n),this._sounds.set(t,n)},Object.defineProperty(e.prototype,"position",{get:function(){return this.sprite.position},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.sprite.x},set:function(t){this.sprite.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.sprite.y},set:function(t){this.sprite.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this.sprite.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.sprite.scale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this.sprite.anchor},enumerable:!1,configurable:!0}),e}(a.default);e.default=c},339:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.FullActor=e.SoundActor=e.SpriteActor=e.Actor=void 0;var o=r(n(614));e.Actor=o.default;var i=r(n(245));e.SpriteActor=i.default;var a=r(n(45));e.SoundActor=a.default;var u=r(n(382));e.FullActor=u.default},45:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(614)),u=n(800),s=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.call(this)||this;return r._sounds=new Map,e.forEach((function(t){r.addSound(t[0],t[1])})),r}return o(e,t),e.prototype.play=function(t){t?this._sounds.get(t).play():this.mixer.play()},e.prototype.stop=function(t){t?this._sounds.get(t).stop():this.mixer.stop()},e.prototype.restart=function(t){t?this._sounds.get(t).restart():this.mixer.restart()},e.prototype.pause=function(t){t?this._sounds.get(t).pause():this.mixer.pause()},e.prototype.addSound=function(t,e){var n=new u.Sound(e);this.mixer.addChild(n),this._sounds.set(t,n)},e}(a.default);e.default=s},245:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(614)),u=n(450),s=function(t){function e(e){var n=t.call(this)||this;return n._rotation=0,n.sprite=new u.Sprite(e),n._stage=n.sprite,n}return o(e,t),Object.defineProperty(e.prototype,"position",{get:function(){return this.sprite.position},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.sprite.x},set:function(t){this.sprite.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.sprite.y},set:function(t){this.sprite.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this.sprite.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.sprite.scale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this.sprite.anchor},enumerable:!1,configurable:!0}),e}(a.default);e.default=s},962:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=i(n(450)),s=i(n(800)),c=a(n(941)),l=a(n(908)),f={width:300,height:400,autoStart:!1,canvas:document.createElement("canvas"),autoStyleCanvas:!1},d=function(){function t(t){var e=this;this.ticker=new c.default,this._width=0,this._height=0,this._loadThen=function(){},this.mainLoop=function(t,n){e.renderSystem.clearScreen(0,0,0,1),e.baseScene.update(t,n),e.renderSystem.render()},t=Object.assign(f,t),this._width=t.width,this._height=t.height,this.renderSystem=new u.App({width:this._width,height:this._height,canvas:t.canvas}),this.soundSystem=new s.App,this.baseScene=new l.default,this.renderSystem.baseStage.addChild(this.baseScene.stage),this.soundSystem.baseMixer.addChild(this.baseScene.mixer),this.renderSystem.loader.loadThen((function(){e.soundSystem.loaded&&e._loadThen()})),this.soundSystem.loader.loadThen((function(){e.renderSystem.loaded&&e._loadThen()})),this.ticker.add(this.mainLoop.bind(this)),t.autoStart&&this.ticker.start()}return t.prototype.start=function(){this.ticker.start()},t.prototype.addImage=function(t,e,n){return this.renderSystem.addResource(t,e,n),this},t.prototype.addSound=function(t,e,n){return this.soundSystem.addResource(t,e,n),this},t.prototype.loadAll=function(){this.renderSystem.loadAll(),this.soundSystem.loadAll()},t.prototype.getTexture=function(t){return this.renderSystem.loader.get(t)},t.prototype.getAudio=function(t){return this.soundSystem.loader.get(t)},t.prototype.loadThen=function(t){this._loadThen=t},t}();e.default=d},495:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(962));e.default=o.default},607:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.TextureLoader=e.Text=e.Stage=e.Sprite=e.AudioLoader=e.Mixer=e.Sound=e.FullActor=e.SoundActor=e.SpriteActor=e.Actor=e.Scene=e.App=void 0;var u=a(n(495));e.App=u.default;var s=a(n(908));e.Scene=s.default;var c=n(339);Object.defineProperty(e,"Actor",{enumerable:!0,get:function(){return c.Actor}}),Object.defineProperty(e,"SpriteActor",{enumerable:!0,get:function(){return c.SpriteActor}}),Object.defineProperty(e,"SoundActor",{enumerable:!0,get:function(){return c.SoundActor}}),Object.defineProperty(e,"FullActor",{enumerable:!0,get:function(){return c.FullActor}});var l=i(n(450)),f=i(n(800)),d=l.Sprite,h=l.Stage,p=l.Text,_=l.Loader;e.Sprite=d,e.Stage=h,e.Text=p,e.TextureLoader=_;var y=f.Sound,v=f.Mixer,b=f.Loader;e.Sound=y,e.Mixer=v,e.AudioLoader=b},908:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(934));e.default=o.default},934:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(450),o=n(800),i=function(){function t(){var t=this;this.children=new Set,this._stage=new r.Stage,this._mixer=new o.Mixer,this.needsInfoNames=new Set,this.update=function(e,n){t.children.forEach((function(n){var r={};n.needsInfoNames.forEach((function(e){r[e]=t[e]})),n.update(e,r)}))}}return Object.defineProperty(t.prototype,"stage",{get:function(){return this._stage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mixer",{get:function(){return this._mixer},enumerable:!1,configurable:!0}),t.prototype.needs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t.length;n<r;n++)this.needsInfoNames.add(t[n]);return this},t.prototype.unneeds=function(t){return this.needsInfoNames.delete(t),this},t.prototype.addChild=function(t){return this._stage.addChild(t._stage),this._mixer.addChild(t._mixer),this.children.add(t),this},t.prototype.removeChild=function(t){return this._stage.removeChild(t._stage),this._mixer.removeChild(t._mixer),this.children.delete(t),this},t}();e.default=i},941:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(414));e.default=o.default},414:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){var t=this;this._FPS=60,this._ecpectedElapsedTime=1e3/this._FPS,this.permittedDelay=2,this._tickFunctions=new Set,this._prevTimeStamp=0,this._mainloop=function(e){var n=t._calcDelta(e);t._tickFunctions.forEach((function(t){t(n)})),t._animationRequest=requestAnimationFrame(t._mainloop.bind(t))}}return t.prototype._calcDelta=function(t){var e=t-this._prevTimeStamp;return this._prevTimeStamp=t,Math.min(e/this._ecpectedElapsedTime,this.permittedDelay)},t.prototype.start=function(){this._animationRequest=requestAnimationFrame(this._mainloop)},t.prototype.stop=function(){this._animationRequest&&cancelAnimationFrame(this._animationRequest)},t.prototype.add=function(t){return this._tickFunctions.add(t),this},t.prototype.remove=function(t){this._tickFunctions.delete(t)},Object.defineProperty(t.prototype,"FPS",{get:function(){return this._FPS},set:function(t){this._FPS=t,this._ecpectedElapsedTime=1e3/this._FPS},enumerable:!1,configurable:!0}),t}();e.default=n}},e={},function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}(607);var t,e}));